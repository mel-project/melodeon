require "aux.melo"

def foo<$n>() = succ(0)
def succ<$n>(x: {$n..$n}) = $n + 1
def peel<$n>(x: {$n+1..$n+1}) = $n
--- 
let x = 0 as Nat in
loop 100 do
set! x = x + 1 
done with assert! x is {100} in peel(x)